✅ 수강신청 + 빌넣 시스템 요구사항 분석 (최종)
1. 학생(Student)
학생은 학번(PK), 아이디, 비밀번호, 이름, 학년, 학과, 전 학기 학점 정보를 가진다.

학생은 회원가입 후 로그인하여 시스템에 접근할 수 있다.

학생은 전공, 학과, 교양 등의 필터를 통해 강의 목록을 조회할 수 있다.

학생은 강의에 대해 수강신청을 할 수 있다.

학생은 신청한 강의에 대해 수강신청을 취소할 수 있다.

학생은 수강신청 내역을 바탕으로 개인 시간표를 확인할 수 있다.

학생은 정원이 초과된 강의에 대해 빌넣(ExtraEnroll) 요청을 제출할 수 있다.

학생은 원하는 강의를 장바구니(Cart)에 담아둘 수 있다.

2. 교수(Professor)
교수는 교수번호(PK), 아이디, 비밀번호, 이름, 학과 정보를 가진다.

교수는 로그인하여 자신이 담당하는 강의 목록을 조회할 수 있다.

교수는 자신의 강의에 대한 빌넣 요청 현황을 조회할 수 있다.

교수는 각 빌넣 요청에 대해 "승인" 또는 "거절" 처리를 할 수 있다.

3. 강의(Course)
강의는 강의번호(PK), 강의명, 강의실, 교수번호(FK), 정원, 분반, 요일, 시작시간, 종료시간 정보를 가진다.

강의는 하나의 교수에 의해 담당된다 (Course 1 : Professor 1 관계).

강의는 요일, 시작시간, 종료시간 정보를 직접 보유한다 (별도 CourseTime 엔터티 없음).

4. 수강신청(Enroll)
수강신청은 신청번호(PK), 학번(FK), 강의번호(FK)로 구성된다.

한 학생은 여러 강의를 신청할 수 있고, 한 강의도 여러 학생이 신청할 수 있다 (N:M 관계, Enroll이 교차 테이블 역할).

신청번호는 자동으로 증가하며, 학번과 강의번호 조합은 유일해야 한다.

5. 빌넣 요청(ExtraEnroll)
빌넣 요청은 요청번호(PK), 학번(FK), 강의번호(FK), 사유(TEXT), 상태(VARCHAR)로 구성된다.

상태는 '대기', '승인', '거절' 중 하나여야 하며, CHECK 제약조건으로 관리한다.

동일 학생이 동일 강의에 대해 중복 요청할 수 없다.

6. 장바구니(Cart)
장바구니는 장바구니번호(PK), 학번(FK), 강의번호(FK)로 구성된다.

학생은 관심 있는 강의를 미리 장바구니에 담을 수 있다.

동일 학생이 동일 강의를 중복 담을 수 없다.

7. 추가 요구사항
모든 INSERT, DELETE, UPDATE는 트랜잭션(Transaction)으로 처리하여 데이터 일관성을 보장한다.

SQL Injection을 방지하기 위해 prepared statement를 사용하고, 입력값 유효성 검사를 병행한다.

학생과 교수는 각각 로그인 시 아이디와 비밀번호를 사용하며, 세션(Session) 기반으로 권한을 관리한다.


✅ 수강신청 + 빌넣 시스템 요구사항 분석 (User 테이블 통합 최종)

1. 사용자(User)
사용자는 UserID(PK), 아이디, 비밀번호, 이름, 역할(Role), 학번, 교수번호, 학년, 학과, 전학기학점 정보를 가진다.

역할(Role)은 'student' 또는 'professor' 중 하나로 설정된다.

학번, 학년, 전학기학점은 학생(student)만 입력하고, 교수번호는 교수(professor)만 입력한다.

사용자 아이디는 UNIQUE 해야 한다.

사용자는 아이디와 비밀번호로 로그인할 수 있으며, 로그인 후 자신의 역할(Role)에 따라 접근 가능한 기능이 다르게 설정된다.

2. 학생(Student 역할의 User)
학생은 강의 목록을 조회할 수 있다 (전공/교양/학과/단과대학 필터링 지원).

학생은 강의에 대해 수강신청(Enroll)을 할 수 있다.

학생은 수강신청한 강의를 조회하고, 수강신청 기간 내에 신청을 취소할 수 있다.

학생은 신청한 강의들을 기준으로 개인 주간 시간표를 조회할 수 있다.

학생은 정원 초과된 강의에 대해 빌넣 요청(ExtraEnroll)을 할 수 있다.

학생은 관심 있는 강의를 장바구니(Cart)에 담아둘 수 있다.

3. 교수(Professor 역할의 User)
교수는 자신이 담당하는 강의 목록을 조회할 수 있다.

교수는 해당 강의에 대한 학생들의 빌넣 요청(ExtraEnroll) 목록을 확인할 수 있다.

교수는 각 빌넣 요청에 대해 "승인" 또는 "거절" 처리를 할 수 있다.

4. 강의(Course)
강의는 강의번호(PK), 강의명, 강의실, 교수(UserID FK), 정원, 분반, 요일, 시작시간, 종료시간 정보를 가진다.

하나의 강의는 반드시 한 명의 교수(User)에게 소속되어야 한다.

5. 수강신청(Enroll)
수강신청은 신청번호(PK), UserID(FK), 강의번호(FK)로 구성된다.

한 학생은 여러 강의를 신청할 수 있고, 하나의 강의도 여러 학생이 신청할 수 있다.

학번(학생)과 강의번호 조합은 UNIQUE해야 한다.

수강신청 시 강의 정원이 초과되면 신청이 차단된다.

6. 빌넣 요청(ExtraEnroll)
빌넣 요청은 요청번호(PK), UserID(FK), 강의번호(FK), 사유(TEXT), 상태(VARCHAR)로 구성된다.

상태는 '대기', '승인', '거절' 중 하나로 관리되며, CHECK 제약 조건을 설정한다.

동일 학생이 동일 강의에 대해 중복 빌넣 요청을 할 수 없다.

7. 장바구니(Cart)
장바구니는 장바구니번호(PK), UserID(FK), 강의번호(FK)로 구성된다.

학생은 관심 강의를 장바구니에 추가할 수 있다.

동일 학생이 동일 강의를 장바구니에 중복 담을 수 없다.

8. 추가 시스템 요구사항
모든 INSERT, DELETE, UPDATE는 트랜잭션(Transaction)으로 처리해 데이터 일관성을 보장한다.

SQL Injection을 방지하기 위해 prepared statement를 사용하고 입력 값 검증을 수행한다.

사용자 로그인 세션(Session)을 이용해 역할(Role)별로 접근 가능한 기능을 제한한다.

시간표(TimeTable)는 View를 통해 동적으로 생성하며, 요일과 시간 순서로 정렬하여 표시한다.


좋아 재민아! 🔥  
그럼 지금까지 반영한 **최종 ERD** 기준으로  
**요구사항 명세서**를 다시 깔끔하고 체계적으로 정리해줄게.

---

# ✅ 수강신청 + 빌넣 시스템 요구사항 분석 (최종)

---

## 1️⃣ 사용자(User)

- 사용자는 사용자ID(학번 또는 교수번호), 아이디, 비밀번호, 이름, 단과대학, 학과, 역할(Role), 학년(학생 전용), 전학기학점(학생 전용) 정보를 가진다.
- 역할(Role)은 'student' 또는 'professor' 문자열로 구분된다.
- 아이디는 시스템 내에서 유일(UNIQUE)해야 한다.
- 사용자는 아이디와 비밀번호로 로그인하며, 로그인 시 역할에 따라 접근 가능한 기능이 구분된다.

---

## 2️⃣ 강의(Course)

- 강의는 강의번호(5자리 숫자 문자열, 10000부터 시작), 강의명, 강의실, 담당 교수ID, 정원, 요일및시간, 영어강의여부, 이수구분, 영역, 단과대학, 학과, 학점, 현재인원 정보를 가진다.
- 강의번호는 VARCHAR(5) 타입으로 5자리 숫자 형태로 저장된다 (예: '10000', '10001'...).
- 요일 및 시간은 '월7A-8A/목2B-3B' 형식으로 저장한다.
- 영어강의 여부는 BOOLEAN 타입으로 관리한다.
- 이수구분, 영역은 VARCHAR 타입으로 자유롭게 입력받는다.

---

## 3️⃣ 수강신청(Enroll)

- 학생은 강의를 선택하여 수강신청할 수 있다.
- 수강신청 시 Enroll 테이블에 신청번호(PK), 사용자ID(FK), 강의번호(FK)가 저장된다.
- 동일 학생이 동일 강의에 중복 신청하는 것은 불가능하다 (UNIQUE 제약조건 적용).
- 수강신청 시 강의의 현재인원은 +1 증가한다.
- 정원이 초과되면 수강신청이 차단된다.

---

## 4️⃣ 빌넣 요청(ExtraEnroll)

- 정원이 초과된 강의에 대해 학생은 빌넣 요청을 제출할 수 있다.
- 빌넣 요청 시 ExtraEnroll 테이블에 요청번호(PK), 사용자ID(FK), 강의번호(FK), 사유, 상태가 저장된다.
- 상태는 '대기', '승인', '거절' 중 하나이며, VARCHAR로 관리된다.
- 동일 학생이 동일 강의에 대해 중복 빌넣 요청을 할 수 없다 (UNIQUE 제약조건 적용).
- 교수가 승인하면 별도로 Enroll 테이블에 수강 신청이 추가된다.

---

## 5️⃣ 장바구니(Cart)

- 학생은 관심 강의를 장바구니에 담아둘 수 있다.
- 장바구니에 담을 때 Cart 테이블에 장바구니번호(PK), 사용자ID(FK), 강의번호(FK)가 저장된다.
- 동일 학생이 동일 강의를 장바구니에 중복 담을 수 없다 (UNIQUE 제약조건 적용).

---

## 6️⃣ 추가 시스템 요구사항

- 모든 데이터 삽입(INSERT), 삭제(DELETE), 수정(UPDATE) 작업은 트랜잭션(Transaction)으로 처리하여 데이터 일관성을 보장한다.
- SQL Injection을 방지하기 위해 prepared statement를 사용하고 입력값 검증을 수행한다.
- 사용자 역할(Role)에 따라 접근 가능한 기능(수강신청/승인 등)이 다르게 제한된다.
- 수강신청, 빌넣 요청, 장바구니 내역은 외래키(FK)를 통해 사용자(User)와 강의(Course) 테이블과 연결된다.

---

# ✅ 추가 기능 계획 (보너스 가능성)

| 추가 기능 | 설명 |
|:---|:---|
| 수강신청 시간제한 기능 | 특정 날짜 및 시간대만 수강신청 가능 |
| 신청 및 취소 로그 기록 | 수강 신청/취소 내역을 별도 테이블에 저장 |
| 빌넣 요청 자동 정렬 | 학년, 전공 여부, 전학기학점 등으로 우선순위 매김 |
| 강의별 신청 현황 통계 | 신청자 수, 잔여 좌석 수를 관리자가 조회 |

---

# 🎯 최종 요약

| 구분 | 최종 상태 |
|:---|:---|
| User | 학생/교수 통합, Role로 구분 |
| Course | 5자리 강의번호, 다양한 강의 정보 속성 추가 |
| Enroll | 수강신청 관리, 중복 금지 |
| ExtraEnroll | 빌넣 요청 관리, 상태 필드 포함 |
| Cart | 장바구니 관리, 중복 금지 |

---

# 📢 교수님께 어필 포인트
- "학생/교수 통합 설계로 확장성과 관리 편의성 고려"
- "5자리 고정 강의번호, 다양한 강의 메타정보 저장"
- "3NF 정규화 완료 + 데이터 무결성 보장"
- "SQL Injection 대비 준비"

(이렇게 발표하면 무조건 좋은 인상 남길 수 있어!)

---



아래는 너의 수강신청 + 빌넣 시스템 프로젝트에 맞춘
\*\*최종 데이터베이스 요구사항 명세서 (User 테이블 통합 버전)\*\*이야.
이대로 보고서에 넣어도 손색없게 정리해봤어. ✅

---

# ✅ 수강신청 + 빌넣 시스템 요구사항 명세서

**(User 테이블 통합 최종 버전)**

---

## 1. 사용자(User)

* 모든 사용자 정보는 `User` 테이블 하나로 통합 관리한다.
* 주요 속성은 다음과 같다:

  * `학번(PK)`, `비밀번호`, `이름`, `이메일(UNIQUE)`, `이메일인증여부`, `이메일인증코드`,
    `관리자승인여부`, `학과ID(FK)`, `학년`, `전학기학점`, `역할(role)`
* `역할(role)`은 `'student'` 또는 `'professor'`로 설정된다.
* `학년`, `전학기학점`은 학생(student)만 입력하며, 교수(professor)는 NULL로 둔다.
* 사용자는 **아이디가 아닌 학번(=로그인 ID)** 과 비밀번호로 로그인한다.
* 로그인은 다음 조건을 모두 만족해야 가능하다:

  * `이메일인증여부 = TRUE`
  * `관리자승인여부 = '승인'`

---

## 2. 학생(Student 역할의 User)

* `역할 = 'student'`인 사용자는 아래 기능을 수행할 수 있다:

1. **강의 목록 조회**

   * 전공/교양, 이수구분, 영역, 학과, 단과대학 기준으로 필터링 가능

2. **수강신청 (Enroll)**

   * 정원이 남은 강의에 대해 신청 가능
   * 신청된 강의는 중복되지 않아야 함 (`학번 + 강의번호` 조합 UNIQUE)

3. **신청 강의 조회 및 취소**

   * 수강신청 내역 확인 및 기간 내 삭제 가능

4. **시간표 조회**

   * 신청한 강의들을 기반으로 시간표를 주간 단위로 정렬하여 시각적으로 확인
   * 시간표는 View를 통해 동적으로 구성됨

5. **빌넣 요청 (ExtraEnroll)**

   * 정원이 초과된 강의에 대해 사유를 작성하여 요청 가능
   * 동일 학생은 동일 강의에 대해 중복 요청 불가

6. **장바구니 (Cart)**

   * 관심 있는 강의를 사전에 담아둘 수 있음
   * 장바구니에는 동일 강의 중복 추가 불가

---

## 3. 교수(Professor 역할의 User)

* `역할 = 'professor'`인 사용자는 다음 기능을 수행할 수 있다:

1. **자신의 강의 목록 조회**

   * `Course` 테이블에서 `담당교수`가 자신의 학번인 강의 리스트 조회

2. **빌넣 요청 확인 및 승인/거절**

   * 자신이 담당하는 강의에 등록된 빌넣 요청을 조회하고 상태 변경 가능
   * 상태는 `'대기'`, `'승인'`, `'거절'` 중 선택

---

## 4. 강의(Course)

* 강의는 다음과 같은 정보를 가진다:

  * `강의번호(PK)`, `강의명`, `강의실`, `담당교수(FK)`, `정원`, `영어강의여부`,
    `이수구분`, `영역`, `학과ID(FK)`, `학점`, `현재인원`
* `강의번호`는 반드시 5자리 숫자로 구성되며, 10000부터 시작
* `담당교수`는 반드시 `User` 테이블에서 `역할 = 'professor'`인 사용자이어야 함
* 한 강의는 한 명의 교수만 담당할 수 있음

---

## 5. 강의 시간(CourseTime)

* 각 강의는 하나 이상의 시간 정보를 가질 수 있음
* 속성: `시간ID(PK)`, `강의번호(FK)`, `요일`, `시작교시`, `종료교시`
* 예: `월 7A-8A`, `목 2B-3B`

---

## 6. 수강신청(Enroll)

* 수강신청 정보는 다음으로 구성된다:

  * `신청번호(PK)`, `학번(FK)`, `강의번호(FK)`
* 하나의 학생은 여러 강의를 신청할 수 있으며, 하나의 강의도 여러 학생이 신청 가능
* `학번 + 강의번호` 조합은 UNIQUE

---

## 7. 빌넣 요청(ExtraEnroll)

* 빌넣 요청 정보는 다음으로 구성된다:

  * `요청번호(PK)`, `학번(FK)`, `강의번호(FK)`, `사유(TEXT)`, `상태`
* 상태는 `ENUM('대기', '승인', '거절')` 로 제한
* 동일 학생이 동일 강의에 대해 중복 요청할 수 없음

---

## 8. 장바구니(Cart)

* 장바구니 정보는 다음으로 구성된다:

  * `장바구니번호(PK)`, `학번(FK)`, `강의번호(FK)`
* 동일 학생이 동일 강의를 중복으로 담을 수 없음
* 장바구니는 View 없이 직접 조인하여 사용

---

## 9. 추가 시스템 요구사항

* 모든 `INSERT`, `UPDATE`, `DELETE`는 트랜잭션으로 감싸 데이터 무결성을 유지
* `Prepared Statement` + `입력값 검증`으로 SQL Injection 방지
* 로그인 이후 `Session`을 이용해 `역할(Role)` 기반 기능 제어
* 시간표는 View로 생성하며 요일/시간 기준 정렬 제공

---

필요하면 이 문서를 PDF나 DOCX로 내보낼 수도 있어.
또는 “보고서 제출용 정리 고!”라고 말하면 전체 묶어서 출력해줄게 😎
계속해서 이어서 할까?
